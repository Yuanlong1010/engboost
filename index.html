<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EngBoost Pro - é›…æ€æ‰˜ç¦å¤‡è€ƒ</title>
    <style>
        :root {
            --primary: #4f46e5;
            --secondary: #10b981;
            --danger: #ef4444;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text: #1f2937;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: none; /* é˜²æ­¢é¢‘ç¹ç‚¹å‡»é€‰ä¸­æ–‡æœ¬ */
        }

        header { text-align: center; margin-bottom: 25px; }
        header h1 { color: var(--primary); font-size: 2.2rem; margin: 0 0 5px 0; }
        header p { color: #6b7280; margin: 0; }

        /* æ¨¡å¼åˆ‡æ¢ */
        .mode-switch {
            background: white;
            padding: 5px;
            border-radius: 30px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            gap: 5px;
        }
        .mode-btn {
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.3s;
        }
        .mode-btn.active { background: var(--primary); color: white; }

        /* å¡ç‰‡å®¹å™¨ */
        .scene {
            width: 100%;
            max-width: 450px;
            height: 360px;
            perspective: 1000px;
            margin-bottom: 25px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            border-radius: 24px;
        }

        .card.is-flipped { transform: rotateY(180deg); }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            background: var(--card-bg);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card__face--front { background: linear-gradient(145deg, #ffffff 0%, #f3f4f6 100%); }
        .card__face--back { 
            background: linear-gradient(145deg, #fff1f2 0%, #fff 100%); 
            transform: rotateY(180deg); 
        }

        /* æ ‡ç­¾ä¸å†…å®¹ */
        .tag {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #e0e7ff;
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        .word-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .word { font-size: 2.8rem; font-weight: 800; color: var(--text); margin: 0; line-height: 1.1; text-align: center; }
        .pronunciation { color: #6b7280; font-family: 'Times New Roman', serif; font-style: italic; font-size: 1.1rem; }

        .definition { font-size: 1.6rem; font-weight: bold; color: var(--primary); margin-bottom: 20px; text-align: center; }
        
        .example-box {
            background: rgba(255,255,255,0.7);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid var(--secondary);
            width: 100%;
        }
        .en-sentence { font-size: 1.1rem; color: #374151; margin-bottom: 8px; line-height: 1.5; font-weight: 500; }
        .cn-sentence { font-size: 0.9rem; color: #9ca3af; }

        /* å–‡å­æŒ‰é’® */
        .audio-btn {
            background: #e0e7ff;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            color: var(--primary);
        }
        .audio-btn:hover { transform: scale(1.1); background: #c7d2fe; }
        .audio-btn:active { transform: scale(0.9); }
        .audio-icon { width: 18px; height: 18px; fill: currentColor; }

        /* åº•éƒ¨æ§åˆ¶åŒº */
        .controls { display: flex; gap: 15px; width: 100%; max-width: 450px; }
        .btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn:active { transform: translateY(2px); box-shadow: none; }
        .btn-forget { background-color: white; color: var(--text); border: 2px solid #e5e7eb; }
        .btn-know { background-color: var(--text); }

        /* è¿›åº¦æ¡ */
        .progress-wrapper {
            width: 100%; max-width: 450px; margin-top: 25px;
            display: flex; align-items: center; gap: 15px;
        }
        .progress-bg {
            flex: 1; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background: var(--secondary); width: 0%; transition: width 0.4s ease;
        }
        .progress-text { font-size: 0.85rem; color: #6b7280; font-weight: 600; min-width: 60px; text-align: right; }

        .msg-toast {
            position: fixed; top: 20px; background: rgba(0,0,0,0.8); color: white; padding: 10px 20px;
            border-radius: 30px; opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="msg-toast" id="toast">è¿›åº¦å·²ä¿å­˜</div>

    <header>
        <h1>EngBoost <span style="font-size:1rem; vertical-align:middle; background:#10b981; color:white; padding:2px 8px; border-radius:6px;">Pro</span></h1>
        <p>é›…æ€æ‰˜ç¦ Â· æ²‰æµ¸å¼å­¦ä¹ </p>
    </header>

    <div class="mode-switch">
        <button class="mode-btn active" onclick="app.switchMode('vocab')">ğŸ“– æ ¸å¿ƒè¯æ±‡</button>
        <button class="mode-btn" onclick="app.switchMode('speaking')">ğŸ—£ï¸ åœºæ™¯å£è¯­</button>
    </div>

    <div class="scene">
        <div class="card" id="flashcard" onclick="app.flipCard(event)">
            <div class="card__face card__face--front">
                <div class="tag" id="tag">TAG</div>
                <div class="word-container">
                    <h2 class="word" id="word">Word</h2>
                    <button class="audio-btn" onclick="app.speak(event, 'word')">
                        <svg class="audio-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
                <p class="pronunciation" id="pron">/pron/</p>
                <p style="margin-top:40px; color:#9ca3af; font-size:0.9rem;">Tap to flip ğŸ‘†</p>
            </div>

            <div class="card__face card__face--back">
                <div class="definition" id="definition">Definition</div>
                <div class="example-box">
                    <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:5px;">
                        <div class="en-sentence" id="ex-en">Example sentence.</div>
                        <button class="audio-btn" style="width:28px; height:28px; flex-shrink:0;" onclick="app.speak(event, 'sentence')">
                            <svg class="audio-icon" style="width:14px; height:14px;" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                        </button>
                    </div>
                    <div class="cn-sentence" id="ex-cn">ä¸­æ–‡ç¿»è¯‘</div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-forget" onclick="app.handleResult(false)">ğŸ¤” æ²¡è®°ä½</button>
        <button class="btn btn-know" onclick="app.handleResult(true)">âš¡ è®°ä½äº†</button>
    </div>

    <div class="progress-wrapper">
        <div class="progress-bg"><div class="progress-fill" id="progress-bar"></div></div>
        <div class="progress-text"><span id="progress-count">0</span> / 20</div>
    </div>

    <script>
        const app = {
            data: {
                vocab: [
                    { word: "Ubiquitous", pron: "/juËËˆbÉªkwÉªtÉ™s/", def: "æ— å¤„ä¸åœ¨çš„", tag: "TOEFL Core", en: "Smartphones are becoming ubiquitous in modern society.", cn: "æ™ºèƒ½æ‰‹æœºåœ¨ç°ä»£ç¤¾ä¼šä¸­æ­£å˜å¾—æ— å¤„ä¸åœ¨ã€‚" },
                    { word: "Mitigate", pron: "/ËˆmÉªtÉªÉ¡eÉªt/", def: "ç¼“è§£ï¼›å‡è½»", tag: "IELTS Writing", en: "It is unclear how to mitigate the effects of tourism on the island.", cn: "ç›®å‰å°šä¸æ¸…æ¥šå¦‚ä½•å‡è½»æ—…æ¸¸ä¸šå¯¹è¯¥å²›å±¿çš„å½±å“ã€‚" },
                    { word: "Pragmatic", pron: "/prÃ¦É¡ËˆmÃ¦tÉªk/", def: "åŠ¡å®çš„ï¼›å®ç”¨çš„", tag: "Daily/Work", en: "We need to adopt a pragmatic approach to this complex problem.", cn: "æˆ‘ä»¬éœ€è¦é‡‡å–åŠ¡å®çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªå¤æ‚çš„é—®é¢˜ã€‚" },
                    { word: "Eloquent", pron: "/ËˆelÉ™kwÉ™nt/", def: "é›„è¾©çš„ï¼›æœ‰å£æ‰çš„", tag: "GRE/Adv", en: "She gave an eloquent speech that moved the audience to tears.", cn: "å¥¹å‘è¡¨äº†ä¸€åœºæ„Ÿäººçš„æ¼”è®²ï¼Œè®©è§‚ä¼—çƒ­æ³ªç›ˆçœ¶ã€‚" },
                    { word: "Procrastinate", pron: "/prÉ™ËˆkrÃ¦stÉªneÉªt/", def: "æ‹–å»¶ï¼›è€½æ", tag: "Campus Life", en: "Most students procrastinate until the night before the exam.", cn: "å¤§å¤šæ•°å­¦ç”Ÿéƒ½ä¼šæ‹–åˆ°è€ƒè¯•å‰ä¸€å¤©æ™šä¸Šæ‰å¼€å§‹å¤ä¹ ã€‚" },
                    { word: "Inevitable", pron: "/ÉªnËˆevÉªtÉ™bl/", def: "ä¸å¯é¿å…çš„", tag: "Reading", en: "Change is inevitable in any growing organization.", cn: "åœ¨ä»»ä½•æˆé•¿çš„ç»„ç»‡ä¸­ï¼Œå˜åŒ–éƒ½æ˜¯ä¸å¯é¿å…çš„ã€‚" }
                ],
                speaking: [
                    { word: "Hit the books", pron: "Idiom", def: "ç”¨åŠŸè¯»ä¹¦ï¼›å¤ä¹ ", tag: "Campus", en: "I can't go out tonight, I gotta hit the books.", cn: "ä»Šæ™šæˆ‘ä¸èƒ½å‡ºå»ï¼Œæˆ‘å¾—ç”¨åŠŸè¯»ä¹¦äº†ã€‚" },
                    { word: "Once in a blue moon", pron: "Idiom", def: "åƒè½½éš¾é€¢ï¼›æå°‘", tag: "Part 1", en: "I see my old college friends once in a blue moon.", cn: "æˆ‘å¾ˆéš¾å¾—è§åˆ°æˆ‘çš„å¤§å­¦è€æœ‹å‹ä»¬ã€‚" },
                    { word: "Burn the midnight oil", pron: "Idiom", def: "æŒ‘ç¯å¤œæˆ˜ï¼›ç†¬å¤œ", tag: "Work", en: "We had to burn the midnight oil to meet the deadline.", cn: "ä¸ºäº†èµ¶æˆªæ­¢æ—¥æœŸï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç†¬å¤œå·¥ä½œã€‚" },
                    { word: "See eye to eye", pron: "Idiom", def: "çœ‹æ³•ä¸€è‡´", tag: "Part 3", en: "My father and I don't always see eye to eye on politics.", cn: "æˆ‘å’Œæˆ‘çˆ¶äº²åœ¨æ”¿æ²»é—®é¢˜ä¸Šçœ‹æ³•å¹¶ä¸æ€»æ˜¯ä¸€è‡´ã€‚" }
                ]
            },
            
            state: {
                currentMode: 'vocab', // 'vocab' or 'speaking'
                currentIndex: 0,
                learnedCount: 0,
                dailyGoal: 20,
                currentList: []
            },

            init() {
                // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¿›åº¦
                const savedCount = localStorage.getItem('engboost_count');
                const savedDate = localStorage.getItem('engboost_date');
                const today = new Date().toDateString();

                // å¦‚æœæ˜¯æ–°çš„ä¸€å¤©ï¼Œé‡ç½®è¿›åº¦
                if (savedDate !== today) {
                    this.state.learnedCount = 0;
                    localStorage.setItem('engboost_date', today);
                } else {
                    this.state.learnedCount = parseInt(savedCount) || 0;
                }

                this.state.currentList = this.data.vocab;
                this.updateUI();
            },

            switchMode(mode) {
                this.state.currentMode = mode;
                this.state.currentList = mode === 'vocab' ? this.data.vocab : this.data.speaking;
                this.state.currentIndex = 0; // åˆ‡æ¢æ¨¡å¼é‡ç½®ç´¢å¼•ï¼Œä½†ä¸é‡ç½®å·²å­¦æ•°é‡
                
                // UIæ›´æ–°
                document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                
                this.resetCard();
                this.updateUI();
            },

            flipCard(e) {
                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸è¦ç¿»è½¬
                if (e.target.closest('button')) return;
                document.getElementById('flashcard').classList.toggle('is-flipped');
            },

            resetCard() {
                document.getElementById('flashcard').classList.remove('is-flipped');
            },

            updateUI() {
                const item = this.state.currentList[this.state.currentIndex % this.state.currentList.length];
                
                // å¡«å……å¡ç‰‡å†…å®¹
                document.getElementById('word').textContent = item.word;
                document.getElementById('pron').textContent = item.pron;
                document.getElementById('tag').textContent = item.tag;
                document.getElementById('definition').textContent = item.def;
                document.getElementById('ex-en').textContent = item.en;
                document.getElementById('ex-cn').textContent = item.cn;

                // æ›´æ–°è¿›åº¦æ¡
                const percent = Math.min((this.state.learnedCount / this.state.dailyGoal) * 100, 100);
                document.getElementById('progress-bar').style.width = percent + '%';
                document.getElementById('progress-count').textContent = this.state.learnedCount;
            },

            speak(e, type) {
                e.stopPropagation(); // é˜»æ­¢å¡ç‰‡ç¿»è½¬
                const item = this.state.currentList[this.state.currentIndex % this.state.currentList.length];
                const text = type === 'word' ? item.word : item.en;
                
                // åœæ­¢ä¹‹å‰çš„å‘éŸ³
                window.speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US'; // è®¾ç½®ä¸ºç¾å¼è‹±è¯­ï¼Œä¹Ÿå¯ä»¥æ”¹æˆ 'en-GB'
                utterance.rate = 0.9; // ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ï¼Œæ›´é€‚åˆå­¦ä¹ 
                window.speechSynthesis.speak(utterance);
            },

            handleResult(known) {
                if (known) {
                    this.state.learnedCount++;
                    this.saveProgress();
                    this.showToast();
                }
                
                this.state.currentIndex++;
                this.resetCard();
                
                // ç¨å¾®å»¶è¿Ÿä¸€ç‚¹æ›´æ–°å†…å®¹ï¼Œè®©ç¿»è½¬åŠ¨ç”»æ›´è‡ªç„¶
                setTimeout(() => {
                    this.updateUI();
                }, 200);
            },

            saveProgress() {
                localStorage.setItem('engboost_count', this.state.learnedCount);
                localStorage.setItem('engboost_date', new Date().toDateString());
            },

            showToast() {
                const toast = document.getElementById('toast');
                toast.style.opacity = '1';
                setTimeout(() => toast.style.opacity = '0', 1500);
            }
        };

        // å¯åŠ¨åº”ç”¨
        app.init();
    </script>
</body>
</html>